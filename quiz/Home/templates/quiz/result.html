{% extends 'pages/base.html' %}

{% block start %}
<style>
  .result-card {
    background: linear-gradient(135deg, #f8f9fa, #ffffff);
    border-radius: 20px;
    border: none;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  }

  .result-header i {
    font-size: 3.5rem;
    color: #ffc107;
  }

  .progress {
    height: 25px;
    border-radius: 30px;
    overflow: hidden;
    background-color: #e9ecef;
  }

  .btn-outline-primary:hover,
  .btn-outline-dark:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .fade-in {
    animation: fadeInUp 0.6s ease;
  }

  @keyframes fadeInUp {
    0% {
      opacity: 0;
      transform: translateY(30px);
    }

    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .result-wrapper {
    margin-top: 40px;
    /* Reduced from full center */
    margin-bottom: 40px;
  }
</style>

<script>
  history.pushState(null, null, location.href);
  window.onpopstate = function () {
    alert("You can't go back to the quiz after submitting.");
    history.go(1);
  };
</script>
<div class="container result-wrapper d-flex justify-content-center">
  <div class="card result-card p-5 text-center fade-in" style="max-width: 650px; width: 100%;">

    <div class="result-header mb-4">
      <i class="fas fa-award mb-3"></i>
      <h2 class="text-success fw-bold">🎉 Quiz Completed!</h2>
      <p class="text-muted fs-5">You did it! Here's how you performed:</p>
    </div>

    <div class="result-summary mb-4">
      <h4 class="mb-3">Score: <span class="text-primary">{{ score }} / {{ total }}</span></h4>

      <div class="row justify-content-center mb-3">
        <div class="col-md-6 text-success">
          ✅ Correct: <strong>{{ correct }}</strong>
        </div>
        <div class="col-md-6 text-danger">
          ❌ Incorrect: <strong>{{ wrong }}</strong>
        </div>
      </div>

      <div class="progress mb-3">
        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar"
          style="width: {{ percentage|floatformat:0 }}%;" aria-valuenow="{{ percentage|floatformat:0 }}"
          aria-valuemin="0" aria-valuemax="100">
          {{ percentage|floatformat:0 }}%
        </div>
      </div>

      {% if percentage >= 90 %}
      <p class="mt-3 text-success fs-5">🌟 Outstanding! You’re a Java Master!</p>
      {% elif percentage >= 70 %}
      <p class="mt-3 text-info fs-5">💡 Great job! You’ve got a solid grip on Java.</p>
      {% elif percentage >= 50 %}
      <p class="mt-3 text-warning fs-5">⚠️ Keep practicing! You're halfway there.</p>
      {% else %}
      <p class="mt-3 text-danger fs-5">🚀 Don't give up! Review and try again.</p>
      {% endif %}
    </div>

    <div class="d-grid gap-2 d-md-block">
      <a href="{% url 'quiz' subject %}" class="btn btn-outline-primary px-4 me-2">

        <i class="fas fa-redo-alt me-1"></i> Retake Quiz
      </a>
      <a href="{% url 'index' %}" class="btn btn-outline-dark px-4">
        <i class="fas fa-home me-1"></i> Go to Home
      </a>
    </div>
  </div>
</div>
{% endblock %}